import{createClient as w}from"https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";const B="https://lqznaoovmqsfipptlktu.supabase.co",T="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxxem5hb292bXFzZmlwcHRsa3R1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODkwMTQzMzksImV4cCI6MjAwNDU5MDMzOX0.CXn7Be_747VSWkg6JQ0LLm6AmQeCmSqRxrSRNatfoL0",C=w(B,T),M=document.getElementById("messageForm"),I=document.getElementById("nombre"),L=document.getElementById("mensaje"),q=document.getElementById("contenedorMensajes");function v(){const e=D(),o=document.getElementById("time"),t=(e.getUTCHours()-5+24)%24,n=E(e.getUTCMinutes()),s=E(e.getUTCSeconds()),r=t>=12?"pm":"am",a=E(t%12||12)+":"+n+":"+s+" "+r;o.textContent=a}function D(){return new Date}function E(e){return(e<10?"0":"")+e}setInterval(v,1e3);function X(){v(),setInterval(v,1e3)}X();function A(e,o={}){let t=document.querySelectorAll(e);t=Array.from(t),t.forEach(n=>{O(n,o)})}function O(e,o){if(!("IntersectionObserver"in window)){o.cb?o.cb(e):entry.target.classList.add("active");return}new IntersectionObserver((n,s)=>{n.forEach(r=>{if(r.isIntersecting){if(o.cb)o.cb(e);else{r.target.classList.add("active");const d=r.target.getAttribute("aria-expanded");d&&console.log({aaa:d})}s.unobserve(r.target)}})},o).observe(e)}A(".intro-text");A(".scroll-reveal",{rootMargin:"-200px"});const k=document.querySelectorAll("[aria-expanded]");k.forEach(e=>{e.addEventListener("click",P)});function P(){const e=event.target,o=e.getAttribute("aria-expanded")==="true",t=e.getAttribute("aria-controls"),n=document.getElementById(t);o?(n.setAttribute("hidden",""),e.setAttribute("aria-expanded","false"),e.textContent="Leer mÃ¡s"):(n.removeAttribute("hidden"),e.setAttribute("aria-expanded","true"),e.textContent="Leer menos",n.querySelector(".text-divided+a").focus())}const b=document.getElementById("pushesBox"),j=document.getElementById("showMoreBtn"),z=document.getElementById("more");let $=5;const F="araceliponce";let H="";function J(e,o){let t=`https://api.github.com/users/${e}/events`,n={};o!==""&&(n={Authorization:`token ${o}`}),fetch(t,{headers:n}).then(s=>s.json()).then(s=>{if(Array.isArray(s)){const d=s.filter(a=>a.type==="PushEvent").map(a=>{const f=a.public;return{repo:a.repo.name,message:a.payload.commits[0].message,date:a.created_at,public:f}});R(d)}else console.error("Invalid API response format.")}).catch(s=>{console.error("Error:",s)})}function R(e){b.innerHTML="",e.slice(0,$).forEach(o=>{const t=new Date(o.date),n={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},s=t.toLocaleDateString("es-ES",n),r=document.createElement("span");r.textContent=`Repositorio: ${o.repo} - Mensaje: ${o.message} - Fecha: ${s}`,b.appendChild(r)})}let S=document.getElementById("showPushesBtn");S&&(b.removeAttribute("hidden"),S.addEventListener("click",()=>{J(F,H)}));j.addEventListener("click",()=>{z.removeAttribute("hidden"),x(),document.querySelector("#comentarios+*").scrollIntoView({behavior:"smooth",block:"end"})});let p=null;async function x(){try{const e=C.from("posts").select("*").order("created_at",{ascending:!0});p&&e.gt("created_at",p);const{data:o,error:t}=await e;t?console.error("Error fetching posts:",t):o.forEach(n=>{const s=new Date(n.created_at),r=s.toLocaleString("es",{day:"numeric"}),d=s.toLocaleString("es",{month:"long"}),a=s.toLocaleString("es",{year:"numeric"}),f=s.toLocaleString("es",{hour:"numeric",minute:"numeric",hour12:!0}),i=`el ${r} de ${d} de ${a}, a las ${f}`,l=document.createElement("div");l.classList.add("msg","drag-it");const u=document.createElement("span");u.classList.add("name"),u.textContent=n.nombre+", ";const m=document.createElement("span");m.classList.add("date"),m.textContent=i;const c=document.createElement("div");c.classList.add("text"),c.textContent=n.mensaje,l.appendChild(u),l.appendChild(m),l.appendChild(c),q.appendChild(l),(!p||n.created_at>p)&&(p=n.created_at)})}catch(e){console.error("Error:",e)}}M.addEventListener("submit",async e=>{e.preventDefault();const o=I.value,t=L.value,{data:n,error:s}=await C.from("posts").insert([{nombre:o,mensaje:t}]);s||(I.value="",L.value="",await x())});const Y=document.querySelectorAll(".text-container");function _(e,o){const t=document.createElement("span");t.textContent=e,t.classList.add("letter"),t.setAttribute("aria-hidden","true"),o.appendChild(t)}Y.forEach(e=>{const t=e.innerText.trim().split("");e.innerHTML="",t.forEach(i=>{_(i,e)});const n=e.querySelectorAll(".letter"),s=70,r=500;let d;function a(i,l,u,m){const c=u-i,h=m-l;return Math.sqrt(c*c+h*h)}function f(){n.forEach(i=>{i.classList.remove("hovered")})}e.addEventListener("mousemove",i=>{clearTimeout(d);const l=i.clientX,u=i.clientY;n.forEach(m=>{const c=m.getBoundingClientRect(),h=c.left+c.width/2,g=c.top+c.height/2;a(l,u,h,g)<s?m.classList.add("hovered"):m.classList.remove("hovered")})}),e.addEventListener("touchstart",i=>{clearTimeout(d);const l=i.touches[0],u=l.clientX,m=l.clientY;n.forEach(c=>{const h=c.getBoundingClientRect(),g=h.left+h.width/2,y=h.top+h.height/2;a(u,m,g,y)<s?c.classList.add("hovered"):c.classList.remove("hovered")}),i.preventDefault()}),e.addEventListener("mouseleave",()=>{d=setTimeout(f,r)}),e.addEventListener("touchend",()=>{d=setTimeout(f,r)})});document.querySelectorAll(".smiley-eye");document.querySelector(".face");document.addEventListener("DOMContentLoaded",()=>{document.querySelector("main").querySelectorAll("img:not(.random-image)").forEach(t=>{const n=document.createElement("a");n.href=t.src;const s=t.cloneNode(!0);n.appendChild(s),t.parentNode.replaceChild(n,t)})});
