document.addEventListener("DOMContentLoaded",()=>{const n=document.body,o={lerp:(t,e,s)=>(1-s)*t+s*e,distance:(t,e,s,a)=>Math.hypot(s-t,a-e)},l=document.querySelector("#hero"),c=t=>{let e=0,s=0;return t||(t=window.event),t.pageX||t.pageY?(e=t.pageX,s=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+n.scrollLeft+docEl.scrollLeft,s=t.clientY+n.scrollTop+docEl.scrollTop),{x:e,y:s}};let i=lastMousePos=cacheMousePos={x:0,y:0};l.addEventListener("mousemove",t=>i=c(t));const h=()=>o.distance(i.x,i.y,lastMousePos.x,lastMousePos.y);class r{constructor(e){this.DOM={el:e},this.defaultStyle={scale:1,x:0,y:0,opacity:0},this.getRect(),this.initEvents()}initEvents(){window.addEventListener("resize",()=>this.resize())}resize(){TweenMax.set(this.DOM.el,this.defaultStyle),this.getRect()}getRect(){this.rect=this.DOM.el.getBoundingClientRect()}isActive(){return TweenMax.isTweening(this.DOM.el)||this.DOM.el.style.opacity!=0}}class d{constructor(){this.DOM={content:document.querySelector(".random-images")},this.images=[],[...this.DOM.content.querySelectorAll(".random-image")].forEach(e=>this.images.push(new r(e))),this.imagesTotal=this.images.length,this.imgPosition=0,this.zIndexVal=1,this.threshold=100,requestAnimationFrame(()=>this.render())}render(){let e=h();cacheMousePos.x=o.lerp(cacheMousePos.x||i.x,i.x,.1),cacheMousePos.y=o.lerp(cacheMousePos.y||i.y,i.y,.1),e>this.threshold&&(this.showNextImage(),++this.zIndexVal,this.imgPosition=this.imgPosition<this.imagesTotal-1?this.imgPosition+1:0,lastMousePos=i);let s=!0;for(let a of this.images)if(a.isActive()){s=!1;break}s&&this.zIndexVal!==1&&(this.zIndexVal=1),requestAnimationFrame(()=>this.render())}showNextImage(){const e=this.images[this.imgPosition];TweenMax.killTweensOf(e.DOM.el),new TimelineMax().set(e.DOM.el,{startAt:{opacity:0,scale:1},opacity:1,scale:1,zIndex:this.zIndexVal,x:cacheMousePos.x-e.rect.width/2,y:cacheMousePos.y-e.rect.height/2},0).to(e.DOM.el,.9,{ease:Expo.easeOut,x:i.x-e.rect.width/2,y:i.y-e.rect.height/2},0).to(e.DOM.el,1,{ease:Power1.easeOut,opacity:0},.4).to(e.DOM.el,1,{ease:Quint.easeOut,scale:.2},.4)}}(()=>new Promise((t,e)=>{imagesLoaded(document.querySelectorAll(".random-image"),t)}))().then(()=>{new d})});
