import{createClient as B}from"https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";const T="https://lqznaoovmqsfipptlktu.supabase.co",M="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxxem5hb292bXFzZmlwcHRsa3R1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODkwMTQzMzksImV4cCI6MjAwNDU5MDMzOX0.CXn7Be_747VSWkg6JQ0LLm6AmQeCmSqRxrSRNatfoL0",I=B(T,M);console.log({supabase:I});const q=document.getElementById("messageForm"),S=document.getElementById("nombre"),v=document.getElementById("mensaje"),D=document.getElementById("contenedorMensajes");console.log(v);function b(){const e=X(),o=document.getElementById("time"),t=(e.getUTCHours()-5+24)%24,n=E(e.getUTCMinutes()),s=E(e.getUTCSeconds()),c=t>=12?"pm":"am",a=E(t%12||12)+":"+n+":"+s+" "+c;o.textContent=a}function X(){return new Date}function E(e){return(e<10?"0":"")+e}setInterval(b,1e3);function O(){b(),setInterval(b,1e3)}O();function A(e,o={}){let t=document.querySelectorAll(e);t=Array.from(t),t.forEach(n=>{k(n,o)})}function k(e,o){if(!("IntersectionObserver"in window)){o.cb?o.cb(e):entry.target.classList.add("active");return}new IntersectionObserver((n,s)=>{n.forEach(c=>{if(c.isIntersecting){if(o.cb)o.cb(e);else{c.target.classList.add("active");const d=c.target.getAttribute("aria-expanded");d&&console.log({aaa:d})}s.unobserve(c.target)}})},o).observe(e)}A(".intro-text");A(".scroll-reveal",{rootMargin:"-200px"});const P=document.querySelectorAll("[aria-expanded]");P.forEach(e=>{e.addEventListener("click",j)});function j(){const e=event.target,o=e.getAttribute("aria-expanded")==="true",t=e.getAttribute("aria-controls"),n=document.getElementById(t);o?(n.setAttribute("hidden",""),e.setAttribute("aria-expanded","false"),e.textContent="Leer mÃ¡s"):(n.removeAttribute("hidden"),e.setAttribute("aria-expanded","true"),e.textContent="Leer menos",n.querySelector(".text-divided+a").focus())}const y=document.getElementById("pushesBox"),x=document.getElementById("showMoreBtn");console.log({showMoreBtn:x});const z=document.getElementById("more");let $=5;const F="araceliponce";let H="";function J(e,o){let t=`https://api.github.com/users/${e}/events`,n={};o!==""&&(n={Authorization:`token ${o}`}),fetch(t,{headers:n}).then(s=>s.json()).then(s=>{if(Array.isArray(s)){const d=s.filter(a=>a.type==="PushEvent").map(a=>{const f=a.public;return{repo:a.repo.name,message:a.payload.commits[0].message,date:a.created_at,public:f}});R(d)}else console.error("Invalid API response format.")}).catch(s=>{console.error("Error:",s)})}function R(e){y.innerHTML="",e.slice(0,$).forEach(o=>{const t=new Date(o.date),n={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},s=t.toLocaleDateString("es-ES",n),c=document.createElement("span");c.textContent=`Repositorio: ${o.repo} - Mensaje: ${o.message} - Fecha: ${s}`,y.appendChild(c)})}let C=document.getElementById("showPushesBtn");C&&(y.removeAttribute("hidden"),C.addEventListener("click",()=>{J(F,H)}));x.addEventListener("click",()=>{z.removeAttribute("hidden"),w(),document.querySelector("#comentarios+*").scrollIntoView({behavior:"smooth",block:"end"})});let p=null;async function w(){try{const e=I.from("posts").select("*").order("created_at",{ascending:!0});p&&e.gt("created_at",p);const{data:o,error:t}=await e;t?console.error("Error fetching posts:",t):o.forEach(n=>{const s=new Date(n.created_at),c=s.toLocaleString("es",{day:"numeric"}),d=s.toLocaleString("es",{month:"long"}),a=s.toLocaleString("es",{year:"numeric"}),f=s.toLocaleString("es",{hour:"numeric",minute:"numeric",hour12:!0}),i=`el ${c} de ${d} de ${a}, a las ${f}`,l=document.createElement("div");l.classList.add("msg","drag-it");const u=document.createElement("span");u.classList.add("name"),u.textContent=n.nombre+", ";const m=document.createElement("span");m.classList.add("date"),m.textContent=i;const r=document.createElement("div");r.classList.add("text"),r.textContent=n.mensaje,l.appendChild(u),l.appendChild(m),l.appendChild(r),D.appendChild(l),(!p||n.created_at>p)&&(p=n.created_at)})}catch(e){console.error("Error:",e)}}q.addEventListener("submit",async e=>{e.preventDefault();const o=S.value,t=v.value,{data:n,error:s}=await I.from("posts").insert([{nombre:o,mensaje:t}]);s||(S.value="",v.value="",await w())});const Y=document.querySelectorAll(".text-container");function _(e,o){const t=document.createElement("span");t.textContent=e,t.classList.add("letter"),t.setAttribute("aria-hidden","true"),o.appendChild(t)}Y.forEach(e=>{const t=e.innerText.trim().split("");e.innerHTML="",t.forEach(i=>{_(i,e)});const n=e.querySelectorAll(".letter"),s=70,c=500;let d;function a(i,l,u,m){const r=u-i,h=m-l;return Math.sqrt(r*r+h*h)}function f(){n.forEach(i=>{i.classList.remove("hovered")})}e.addEventListener("mousemove",i=>{clearTimeout(d);const l=i.clientX,u=i.clientY;n.forEach(m=>{const r=m.getBoundingClientRect(),h=r.left+r.width/2,g=r.top+r.height/2;a(l,u,h,g)<s?m.classList.add("hovered"):m.classList.remove("hovered")})}),e.addEventListener("touchstart",i=>{clearTimeout(d);const l=i.touches[0],u=l.clientX,m=l.clientY;n.forEach(r=>{const h=r.getBoundingClientRect(),g=h.left+h.width/2,L=h.top+h.height/2;a(u,m,g,L)<s?r.classList.add("hovered"):r.classList.remove("hovered")}),i.preventDefault()}),e.addEventListener("mouseleave",()=>{d=setTimeout(f,c)}),e.addEventListener("touchend",()=>{d=setTimeout(f,c)})});document.querySelectorAll(".smiley-eye");document.querySelector(".face");document.addEventListener("DOMContentLoaded",()=>{document.querySelector("main").querySelectorAll("img:not(.random-image)").forEach(t=>{const n=document.createElement("a");n.href=t.src;const s=t.cloneNode(!0);n.appendChild(s),t.parentNode.replaceChild(n,t)})});
